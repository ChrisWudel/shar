<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>How to reconstruct multiple patterns • shar | Species-habitat associations in R</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/sandstone/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../pkgdown.js"></script><meta property="og:title" content="How to reconstruct multiple patterns">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../../index.html">shar | Species-habitat associations in R</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../../articles/get_started.html">
    <span class="fa fa fa fa-magic"></span>
     
    Get Started
  </a>
</li>
<li>
  <a href="../../reference/index.html">
    <span class="fa fa-gears"></span>
     
    Functions
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-graduation-cap"></span>
     
    More
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/articles/background.html">
        <span class="fa fa-book"></span>
         
        General Background
      </a>
    </li>
    <li>
      <a href="../../articles/articles/reconstruct_multiple_patterns.html">
        <span class="fa fa-book"></span>
         
        Reconstruct multiple pattern
      </a>
    </li>
    <li>
      <a href="../../articles/articles/publication_record.html">
        <span class="fa fa-file-text-o"></span>
         
        Publication Record
      </a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../../news/index.html">
    <span class="fa fa-newspaper-o"></span>
     
    News
  </a>
</li>
<li>
  <a href="https://github.com/r-spatialecology/shar">
    <span class="fa fa-github fa-lg"></span>
     
    Github
  </a>
</li>
<li>
  <a href="https://mhesselbarth.rbind.io">
    <span class="fa fa-user"></span>
     
    Contact
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>How to reconstruct multiple patterns</h1>
            
            <h4 class="date">2019-09-09</h4>
      
      
      <div class="hidden name"><code>reconstruct_multiple_patterns.Rmd</code></div>

    </div>

    
    
<p>In case you want to reconstruct several patterns at once (e.g. for different points in time if repeated censuses are available), you can use the following code. Please be aware that the maximum number of iterations was set to <code>max_runs = 10</code> to keep the computational time low for this example. For an applied case, this value should be increased.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="co"># library(tidyverse)</span></a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(shar)</a>
<a class="sourceLine" id="cb1-3" title="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(spatstat)</a></code></pre></div>
<p>In case you want to only create the spatial characteristics, this is straightforward using <code><a href="https://www.rdocumentation.org/packages/base/topics/lapply">lapply()</a></code>.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="co"># create list with patterns</span></a>
<a class="sourceLine" id="cb2-2" title="2">list_pattern &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(species_a, species_b)</a>
<a class="sourceLine" id="cb2-3" title="3"></a>
<a class="sourceLine" id="cb2-4" title="4"><span class="co"># reconstruct all patterns in list</span></a>
<a class="sourceLine" id="cb2-5" title="5">result &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/lapply">lapply</a></span>(list_pattern, <span class="cf">function</span>(x) <span class="kw"><a href="../../reference/reconstruct_pattern_homo.html">reconstruct_pattern_homo</a></span>(<span class="dt">pattern =</span> x, </a>
<a class="sourceLine" id="cb2-6" title="6">                                                                    <span class="dt">n_random =</span> <span class="dv">3</span>, </a>
<a class="sourceLine" id="cb2-7" title="7">                                                                    <span class="dt">max_runs =</span> <span class="dv">10</span>,</a>
<a class="sourceLine" id="cb2-8" title="8">                                                                    <span class="dt">verbose =</span> <span class="ot">FALSE</span>))</a></code></pre></div>
<p>The result will be a nested list including all <em>m</em> randomization (including the observed pattern) of the <em>n</em> provided input patterns.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="co"># get mean energy</span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/lapply">lapply</a></span>(result, <span class="cf">function</span>(x) <span class="kw"><a href="../../reference/calculate_energy.html">calculate_energy</a></span>(<span class="dt">pattern =</span> x,</a>
<a class="sourceLine" id="cb3-3" title="3">                                            <span class="dt">verbose =</span> <span class="ot">FALSE</span>))</a></code></pre></div>
<pre><code>## [[1]]
## randomized_1 randomized_2 randomized_3 
##   0.11281340   0.10502723   0.09441964 
## 
## [[2]]
## randomized_1 randomized_2 randomized_3 
##    0.2601736    0.2694639    0.2593055</code></pre>
<p>Another possible would be to first reconstruct <em>n</em> times the spatial characteristics and afterwards reconstruct the marks <em>m</em> times for each of the <em>n</em> spatial reconstructions.</p>
<p>Firstly, reconstruct only the spatial characteristics <em>n</em> times. The observed pattern is not needed in this case, so you can put <code>return_input = FALSE</code>.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1"><span class="co"># reconstruct spatial strucutre</span></a>
<a class="sourceLine" id="cb5-2" title="2">reconstructed_pattern &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/reconstruct_pattern_homo.html">reconstruct_pattern_homo</a></span>(species_a, </a>
<a class="sourceLine" id="cb5-3" title="3">                                                  <span class="dt">n_random =</span> <span class="dv">3</span>, </a>
<a class="sourceLine" id="cb5-4" title="4">                                                  <span class="dt">max_runs =</span> <span class="dv">10</span>,</a>
<a class="sourceLine" id="cb5-5" title="5">                                                  <span class="dt">return_input =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb5-6" title="6">                                                  <span class="dt">verbose =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<p>Secondly, to reconstruct the (numeric) marks of the observed pattern for each of the spatially reconstructed patterns, just use <code><a href="https://www.rdocumentation.org/packages/base/topics/lapply">lapply()</a></code> in combination with <code><a href="../../reference/reconstruct_pattern_marks.html">reconstruct_pattern_marks()</a></code>.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1"><span class="co"># get only selected marks of input (numeric marks)</span></a>
<a class="sourceLine" id="cb6-2" title="2">species_a_marks &lt;-<span class="st"> </span>spatstat<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/spatstat/topics/subset.ppp">subset.ppp</a></span>(species_a, <span class="dt">select =</span> dbh)</a>
<a class="sourceLine" id="cb6-3" title="3"></a>
<a class="sourceLine" id="cb6-4" title="4"><span class="co"># reconstruct marks 3 times for each input pattern</span></a>
<a class="sourceLine" id="cb6-5" title="5">result_marks &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/lapply">lapply</a></span>(reconstructed_pattern<span class="op">$</span>randomized, </a>
<a class="sourceLine" id="cb6-6" title="6">                       <span class="cf">function</span>(x) <span class="kw"><a href="../../reference/reconstruct_pattern_marks.html">reconstruct_pattern_marks</a></span>(<span class="dt">pattern =</span> x, </a>
<a class="sourceLine" id="cb6-7" title="7">                                                             <span class="dt">marked_pattern =</span> species_a_marks, </a>
<a class="sourceLine" id="cb6-8" title="8">                                                             <span class="dt">max_runs =</span> <span class="dv">10</span>,</a>
<a class="sourceLine" id="cb6-9" title="9">                                                             <span class="dt">n_random =</span> <span class="dv">3</span>, <span class="dt">verbose =</span> <span class="ot">FALSE</span>))</a></code></pre></div>
<p>Again, the result is a nested list with the same dimensions as provided input patterns and reconstructions.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1"><span class="co"># get energy</span></a>
<a class="sourceLine" id="cb7-2" title="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/lapply">lapply</a></span>(result_marks, <span class="cf">function</span>(x) <span class="kw"><a href="../../reference/calculate_energy.html">calculate_energy</a></span>(<span class="dt">pattern =</span> x, </a>
<a class="sourceLine" id="cb7-3" title="3">                                                  <span class="dt">verbose =</span> <span class="ot">FALSE</span>))</a></code></pre></div>
<pre><code>## $randomized_1
## randomized_1 randomized_2 randomized_3 
##    0.1543972    0.1254697    0.1189024 
## 
## $randomized_2
## randomized_1 randomized_2 randomized_3 
##    0.1161964    0.1217154    0.1330592 
## 
## $randomized_3
## randomized_1 randomized_2 randomized_3 
##   0.11099954   0.08812863   0.08580831</code></pre>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Maximillian H.K. Hesselbarth, Marco Sciaini.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
